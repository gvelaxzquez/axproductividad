import{r as a,j as e,B as v,R as k}from"./getAllowClear-DzOICv91.js";import{T as F}from"./index-sl0vh_WN.js";import{F as o}from"./index-Dz0cqGpm.js";import{I as h}from"./index-CYJEyo0l.js";import{C as T}from"./index-B8B8aVgb.js";import{s as l}from"./index-BtLmpCpJ.js";import"./convertToTooltipProps-DsHUCvc1.js";const{Title:E,Text:R,Link:I}=F,L=()=>{const[m,d]=a.useState(!1),[f,t]=a.useState(!1),[u,x]=a.useState(""),[g,j]=a.useState(""),[y,p]=a.useState(!1),b=new Date().getFullYear(),[w]=o.useForm(),[,c]=a.useState(!1);a.useEffect(()=>{const r=localStorage.getItem("email"),s=localStorage.getItem("password");p(!0),r&&s&&(x(r),j(s),p(!0))},[]);const C=r=>{p(r.target.checked)},S=async r=>{r.preventDefault(),c(!0),t(!0);const n=await fetch("/Login/Login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Usuario:u,Contrasena:g})});if(c(!1),n.ok){const i=await n.json();i.Exito?(y?(localStorage.setItem("email",u),localStorage.setItem("password",g),localStorage.setItem("remember","true")):(localStorage.removeItem("email"),localStorage.removeItem("password"),localStorage.setItem("remember","false")),window.location.href=i.URL):(t(!1),l.error(i.Mensaje))}else{t(!1);const i=await n.json();console.log(i),l.error("Error al ejecutar la petición")}},P=async r=>{t(!0),c(!0);const s=await fetch("/Login/RecuperarContrasena",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(c(!1),s.ok){const n=await s.json();n.Exito?(l.success("Se ha enviado un correo para recuperar tu contraseña a "+r.Usuario),d(!1),t(!1)):(t(!1),l.error(n.Mensaje))}else t(!1),l.error("Error al ejecutar la petición")};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#f0f2f5"},children:[e.jsx("img",{src:"../Content/Project/Imagenes/LogoPrincipal.png",alt:"yitpro logo",style:{width:189,height:69,marginBottom:20}})," ",e.jsxs("div",{style:{width:300,padding:20,backgroundColor:"white",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(E,{level:4,style:{textAlign:"center",marginBottom:20},children:[" ",m?"Recuperar contraseña":"Inicia sesión con tu cuenta"]}),m?e.jsxs(o,{name:"forgotPassword",layout:"vertical",onFinish:P,children:[e.jsx(o.Item,{name:"Usuario",rules:[{required:!0,message:"Por favor, ingresa tu correo electrónico"},{type:"email",message:"Por favor, ingresa un correo electrónico válido"}],children:e.jsx(h,{placeholder:"Ingresa tu correo electrónico"})}),e.jsx(o.Item,{children:e.jsx(v,{type:"primary",htmlType:"submit",block:!0,loading:f,children:"Enviar correo de recuperación"})})]}):e.jsxs(o,{form:w,name:"login",initialValues:{remember:!0},onSubmitCapture:S,layout:"vertical",children:[e.jsx(o.Item,{rules:[{required:!0,message:"Por favor, ingresa tu correo electrónico"},{type:"email",message:"Por favor, ingresa un correo electrónico válido"}],children:e.jsx(h,{value:u,onChange:r=>x(r.target.value),placeholder:"Correo electrónico"})}),e.jsx(o.Item,{rules:[{required:!0,message:"Por favor, ingresa tu contraseña"}],children:e.jsx(h.Password,{value:g,onChange:r=>j(r.target.value),placeholder:"Contraseña"})}),e.jsx(o.Item,{valuePropName:"checked",style:{marginBottom:10},children:e.jsx(T,{checked:y,onChange:C,children:"Recordar credenciales"})}),e.jsx(o.Item,{children:e.jsx(v,{type:"primary",htmlType:"submit",block:!0,loading:f,style:{backgroundColor:"#0057FF",borderColor:"#0057FF"},children:"Ingresar"})})]}),m?e.jsx(I,{href:"#",onClick:()=>d(!1),style:{display:"block",textAlign:"center",marginTop:10},children:"Volver al inicio de sesión"}):e.jsx(I,{href:"#",onClick:()=>d(!0),style:{display:"block",textAlign:"center",marginTop:10},children:"¿Olvidó su contraseña?"})]}),e.jsxs(R,{style:{marginTop:20,color:"#aaa"},children:["©",b," - Axsis tecnología"]})]})},B=k.createRoot(document.getElementById("login"));B.render(e.jsx(L,{}));
