var temagraficasurgentes = {
    color: [
        '#00cc33', '#ff0000'
    ],

    title: {
        itemGap: 8,
        textStyle: {
            fontWeight: 'normal',
            color: '#408829'
        }
    },

    dataRange: {
        color: ['#1f610a', '#97b58d']
    },

    toolbox: {
        color: ['#408829', '#408829', '#408829', '#408829']
    },

    tooltip: {
        backgroundColor: 'rgba(0,0,0,0.5)',
        axisPointer: {
            type: 'line',
            lineStyle: {
                color: '#408829',
                type: 'dashed'
            },
            crossStyle: {
                color: '#408829'
            },
            shadowStyle: {
                color: 'rgba(200,200,200,0.3)'
            }
        }
    },

    dataZoom: {
        dataBackgroundColor: '#eee',
        fillerColor: 'rgba(64,136,41,0.2)',
        handleColor: '#408829'
    },
    grid: {
        borderWidth: 0
    },

    categoryAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },

    valueAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitArea: {
            show: true,
            areaStyle: {
                color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },
    timeline: {
        lineStyle: {
            color: '#408829'
        },
        controlStyle: {
            normal: { color: '#408829' },
            emphasis: { color: '#408829' }
        }
    },

    k: {
        itemStyle: {
            normal: {
                color: '#68a54a',
                color0: '#a9cba2',
                lineStyle: {
                    width: 1,
                    color: '#408829',
                    color0: '#86b379'
                }
            }
        }
    },
    map: {
        itemStyle: {
            normal: {
                areaStyle: {
                    color: '#ddd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            },
            emphasis: {
                areaStyle: {
                    color: '#99d2dd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            }
        }
    },
    force: {
        itemStyle: {
            normal: {
                linkStyle: {
                    strokeColor: '#408829'
                }
            }
        }
    },
    chord: {
        padding: 4,
        itemStyle: {
            normal: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            },
            emphasis: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            }
        }
    },
    gauge: {
        startAngle: 225,
        endAngle: -45,
        axisLine: {
            show: true,
            lineStyle: {
                color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                width: 8
            }
        },
        axisTick: {
            splitNumber: 10,
            length: 12,
            lineStyle: {
                color: 'auto'
            }
        },
        axisLabel: {
            textStyle: {
                color: 'auto'
            }
        },
        splitLine: {
            length: 18,
            lineStyle: {
                color: 'auto'
            }
        },
        pointer: {
            length: '90%',
            color: 'auto'
        },
        title: {
            textStyle: {
                color: '#333'
            }
        },
        detail: {
            textStyle: {
                color: 'auto'
            }
        }
    },
    textStyle: {
        fontFamily: 'Arial, Verdana, sans-serif'
    }
};
var temagraficas = {
    color: [
        '#0033cc', '#9933cc', '#1d1d95', '#f4811d', '#00cccc', '#99cc00',
        '#ffff00', '#99cc00', '#00cc33', '#cc0099'
    ],

    title: {
        itemGap: 8,
        textStyle: {
            fontWeight: 'normal',
            color: '#408829'
        }
    },

    dataRange: {
        color: ['#1f610a', '#97b58d']
    },

    toolbox: {
        color: ['#408829', '#408829', '#408829', '#408829']
    },

    tooltip: {
        backgroundColor: 'rgba(0,0,0,0.5)',
        axisPointer: {
            type: 'line',
            lineStyle: {
                color: '#408829',
                type: 'dashed'
            },
            crossStyle: {
                color: '#408829'
            },
            shadowStyle: {
                color: 'rgba(200,200,200,0.3)'
            }
        }
    },

    dataZoom: {
        dataBackgroundColor: '#eee',
        fillerColor: 'rgba(64,136,41,0.2)',
        handleColor: '#408829'
    },
    grid: {
        borderWidth: 0
    },

    categoryAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },

    valueAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitArea: {
            show: true,
            areaStyle: {
                color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },
    timeline: {
        lineStyle: {
            color: '#408829'
        },
        controlStyle: {
            normal: { color: '#408829' },
            emphasis: { color: '#408829' }
        }
    },

    k: {
        itemStyle: {
            normal: {
                color: '#68a54a',
                color0: '#a9cba2',
                lineStyle: {
                    width: 1,
                    color: '#408829',
                    color0: '#86b379'
                }
            }
        }
    },
    map: {
        itemStyle: {
            normal: {
                areaStyle: {
                    color: '#ddd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            },
            emphasis: {
                areaStyle: {
                    color: '#99d2dd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            }
        }
    },
    force: {
        itemStyle: {
            normal: {
                linkStyle: {
                    strokeColor: '#408829'
                }
            }
        }
    },
    chord: {
        padding: 4,
        itemStyle: {
            normal: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            },
            emphasis: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            }
        }
    },
    gauge: {
        startAngle: 225,
        endAngle: -45,
        axisLine: {
            show: true,
            lineStyle: {
                color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                width: 8
            }
        },
        axisTick: {
            splitNumber: 10,
            length: 12,
            lineStyle: {
                color: 'auto'
            }
        },
        axisLabel: {
            textStyle: {
                color: 'auto'
            }
        },
        splitLine: {
            length: 18,
            lineStyle: {
                color: 'auto'
            }
        },
        pointer: {
            length: '90%',
            color: 'auto'
        },
        title: {
            textStyle: {
                color: '#333'
            }
        },
        detail: {
            textStyle: {
                color: 'auto'
            }
        }
    },
    textStyle: {
        fontFamily: 'Arial, Verdana, sans-serif'
    }
};
var num = 1;
var dsGraficas = [];

$(document).ready(function () {
    CargaInicialGraficas();

    $('#Tablas').hide();
    $('#accTwoColTeen').addClass('panel-body-open');
    $('#accTwoColTeen').css('display', 'block');

    $(".filter-settings-icon").on("click", function () {
        $(".filter-settings").toggleClass("active");
    });

});

function CargaInicialGraficas() {
    var url = $('#urlCargaInicialGraficas').val();
    $.ajax({

        url: url,
        type: "POST",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: successCargaInicialGraficas,
        error: function (xmlHttpRequest, textStatus, errorThrown) {

            MensajeError(textStatus);
            console.log(xmlHttpRequest);
        }
    });
    return false;
}
function successCargaInicialGraficas(data) {
    if (data.Exito) {

        $('#SelGraficasG').empty();
        $('#SelGraficasG').append(data.LstGraficas);
        $('#SelGraficasG').selectpicker('refresh');

        $('#SelRecursosG').empty();
        $('#SelRecursosG').append(data.LstUsuarios);
        $('#SelRecursosG').selectpicker('refresh');
    }
    else if (data.Advertencia) {
        MensajeAdvertencia(data.Mensaje);
    }
    else {
        MensajeError(data.Mensaje);
    }
}

//$(document).on('change', '#SelTipoReqG', function (e) {
//    var tiposRequisicionBuscar = $(this).val();
//    $('#SelClasificacionG').empty();
//    $('#SelClasificacionG').selectpicker('refresh');

//    for (var item in tiposRequisicionBuscar) {
//        LlamadaAgregaRequisicionHistorial(tiposRequisicionBuscar[item]);
//    }
//    $('#SelClasificacionG').selectpicker('refresh');


//})

//function LlamadaAgregaRequisicionHistorial(idTipoRequisicon) {
//    var url = $('#urlCargaClasificionReqHistoricos').val();
//    $.ajax({
//        url: url,
//        data: JSON.stringify({ idTipoProducto: idTipoRequisicon }),
//        type: "POST",
//        contentType: "application/json; charset=utf-8",
//        dataType: "json",
//        async: false,
//        success: SuccessLlamadaAgregaRequisicionHistorial,
//        error: function (xmlHttpRequest, textStatus, errorThrown) {

//            MensajeError("Error al realizar la consulta, intente de nuevo.");
//        }
//    });
//}
//function SuccessLlamadaAgregaRequisicionHistorial(data) {
//    if (data.Exito) {

//        $('#SelClasificacionG').append(data.CmbProductoServicio);
//        $('#SelClasificacionG').selectpicker('refresh');
//    }
//    else if (data.Advertencia) {
//        MensajeAdvertencia(data.Mensaje);
//    }
//    else {
//        MensajeError(data.Mensaje);
//    }
//}

//$(document).on('change', '#SelTipoCompraG', function (e) {
//    var tiposCompraBuscar = $(this).val();
//    $('#SelDepartamentoG').empty();
//    $('#SelDepartamentoG').selectpicker('refresh');

//    $('#SelProveedorG').empty();
//    $('#SelProveedorG').selectpicker('refresh');

//    for (var item in tiposCompraBuscar) {
//        LlamadaAgregaTiposCompraBuscarHistorial(tiposCompraBuscar[item]);
//    }
//    $('#SelDepartamentoG').selectpicker('refresh');
//    $('#SelProveedorG').selectpicker('refresh');


//})

//function LlamadaAgregaTiposCompraBuscarHistorial(idTipoCompra) {
//    var url = $('#urlCargaProveedoresDepReqHistorico').val();
//    $.ajax({
//        url: url,
//        data: JSON.stringify({ idTipoProveedor: idTipoCompra }),
//        type: "POST",
//        contentType: "application/json; charset=utf-8",
//        dataType: "json",
//        async: false,
//        success: SuccessLlamadaAgregaTiposCompraBuscarHistorial,
//        error: function (xmlHttpRequest, textStatus, errorThrown) {

//            MensajeError("Error al realizar la consulta, intente de nuevo.");
//        }
//    });
//}
//function SuccessLlamadaAgregaTiposCompraBuscarHistorial(data) {
//    if (data.Exito) {


//        $('#SelProveedorG').append(data.CmbProveedor);
//        $('#SelDepartamentoG').append(data.CmbDepartamentos);
//        $('#SelProveedorG').selectpicker('refresh');
//        $('#SelDepartamentoG').selectpicker('refresh');

//    }
//    else if (data.Advertencia) {
//        MensajeAdvertencia(data.Mensaje);
//    }
//    else {
//        MensajeError(data.Mensaje);
//    }
//}

$(document).on('click', '#BtnGenerarGrafica', function (e) {

    if ($('#SelAnioG').val() == null) {
        MensajeAdvertencia('Seleccione al menos un año.')

        return false;
    }


    if ($('#SelRecursosG').val() == null) {
        MensajeAdvertencia('Seleccione al menos un recurso.')

        return false;
    }

    var tipoReporte = $('#SelGraficasG').val();
    if (tipoReporte == null) {
        MensajeAdvertencia('Seleccione al menos una gráfica.')

        return false;
    }

  /*  var tipoReporte = $('#SelRecursosG').val();*/





        var datosBuscar = {

            LstAnios: $('#SelAnioG').val(),
            LstMeses: $('#SelMesG').val(),
            LstRecursos: $('#SelRecursosG').val(),
            LstGraficas: $('#SelGraficasG').val()
        }
        LlamadaFiltrarDatos(datosBuscar);
        $(".filter-settings").toggleClass("active");
 
    return false;
});

$(document).on('click', '#BtnLimpiar', function (e) {
    $('#Graficas').empty();
    $('#Tablas').empty();
    $('#scripts').empty();
    $('#RdoGrafica').click();

});
function LlamadaFiltrarDatos(datosBuscar) {
    var url = $('#urlFiltrarGraficas').val();
    $.ajax({
        url: url,
        data: JSON.stringify(datosBuscar),
        type: "POST",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: SuccessLlamadaGenerarDatosEstadisticas,
        error: function (xmlHttpRequest, textStatus, errorThrown) {

            MensajeError("Error al realizar la consulta, intente de nuevo.");
        }
    });
}
function SuccessLlamadaGenerarDatosEstadisticas(data) {
    if (data.Exito) {

        $('#Graficas').empty();
        $('#Tablas').empty();
        $('#scripts').empty();
        $('#RdoGrafica').click();
        $('#Graficas').show();
        $('#Tablas').hide();

        $('#LblRdoGrafica').click();
        //dsGraficas.push(data.Graficas);
        var dsDatos = JSON.parse(data.Graficas);
        $.each(dsDatos, function (key, value) {

            dsGraficas.push(value);
            var id = value.id;
            var nombre = value.Nombre;
            var tipo = value.Tipo;
            var series = value.Series;
            var columnas = value.LstColumnas;
            var valores = value.LstValores;
            var tabla = value.Tabla;
            var idgrafica = "grafica" + num.toString();
            var vargrafica = "vargrafica" + num.toString();
            var vartabla = "vartabla" + num.toString();

            var tema = "temagraficas";

            if (nombre == "Urgentes/No urgentes") {
                var tema = "temagraficasurgentes"
            }

            if (tipo == "Pie") {
                var grafica = "<div class='col-md-6'>"
                    + "     <div class='panel panel-default'>"
                    + "                           <div class='panel-heading'>"
                    + "                               <div class='panel-title-box'>"
                    + "                                  <h3>" + nombre + "</h3>"
                    + "                              </div>"
                    + "                               <ul class='panel-controls' style='margin-top: 2px;'>"
                    + '                                 <li><a href="#" onclick="AbrirGrafica(' + "'" + id + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                    + "                             </ul>"
                    + "                         </div>"
                    + "                         <div class='panel-body'>"
                    + "                               <div id='" + idgrafica + "' style='height:350px;' > "
                    + "                                </div>"
                    + "                         </div>"
                    + "                       </div>"
                    + "                 </div>"


                var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "              tooltip: {"
                    + "                   trigger: 'item',"
                    + "                   formatter: '{a} <br/>{b} : {c} ({d}%)'"
                    + "               },"
                    + "              calculable: true,"
                    + "               legend: { "
                    + '                   x: "center",'
                    + "                   y: 'bottom',"
                    + '                   data:' + series + ''
                    + "               },"
                    + "               toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['funnel', 'pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                    + "               }, "
                    + "               series: [{ "
                    + "                   name: 'Ordenes',"
                    + "                   type: 'pie', "
                    + "                   radius: ['35%', '55%'],"
                    + "                   itemStyle: { "
                    + "                       normal: { "
                    + "                           label: { "
                    + "                               show: true "
                    + "                           },"
                    + "                           labelLine: {"
                    + "                               show: true "
                    + "                           }"
                    + "                       },"
                    + "                       emphasis: {"
                    + "                           label: {"
                    + "                               show: true,"
                    + "                               position: 'center',"
                    + "                               textStyle: {"
                    + "                                   fontSize: '14',"
                    + "                                   fontWeight: 'normal' "
                    + "                               } "
                    + "                           }"
                    + "                       }"
                    + "                   },"
                    + '                   data: ' + valores + ''
                    + "               }]"
                    + "           });"
                    + "</script>"

                $('#Graficas').append(grafica);
                $('#scripts').append(script);

            }
            else if (tipo == "bar") {
                var grafica = "<div class='col-md-12'>"
                    + "     <div class='panel panel-default'>"
                    + "                           <div class='panel-heading'>"
                    + "                               <div class='panel-title-box'>"
                    + "                                  <h3>" + nombre + "</h3>"
                    + "                              </div>"
                    + "                               <ul class='panel-controls' style='margin-top: 2px;'>"
                    + '                                 <li><a href="#" onclick="AbrirGrafica(' + "'" + id + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                    + "                             </ul>"
                    + "                         </div>"
                    + "                         <div class='panel-body'>"
                    + "                               <div id='" + idgrafica + "' style='height:450px;' > "
                    + "                                </div>"
                    + "                         </div>"
                    + "                       </div>"
                    + "                 </div>"

                var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "title: {},"
                    + "tooltip: { trigger: 'axis'},"
                    + " legend: {"
                    + '  data: ' + series + ''
                    + " },"
                    + "  toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                    + "},"
                    + "calculable: true,"
                    + " xAxis: [{ "
                    + " type: 'category',"
                    + ' data:' + columnas + ''
                    + " }],"
                    + " yAxis: [{ "
                    + " type: 'value' "
                    + "}],"
                    + 'series: ' + valores + ''
                    + "});"
                    + "</script>"


                $('#Graficas').append(grafica);
                $('#scripts').append(script);

            }
            else if (tipo == "line") {

                var grafica = "<div class='col-md-12'>"
                    + "     <div class='panel panel-default'>"
                    + "                           <div class='panel-heading'>"
                    + "                               <div class='panel-title-box'>"
                    + "                                  <h3>" + nombre + "</h3>"
                    + "                              </div>"
                    + "                               <ul class='panel-controls' style='margin-top: 2px;'>"
                    + '                                 <li><a href="#" onclick="AbrirGrafica(' + "'" + id + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                    //+ "                                    <li class='dropdown'>"
                    //+ "                                     <a href='#' class='dropdown-toggle' data-toggle='dropdown'><span class='fa fa-cog'></span></a>"
                    //+ "                                     <ul class='dropdown-menu'>"
                    //+ "                                           <li><a href='#' class='panel-collapse'><span class='fa fa-angle-down'></span> Collapse</a></li>"
                    //+ "                                         <li><a href='#' class='panel-remove'><span class='fa fa-times'></span> Remove</a></li>"
                    //+ "                                      </ul>"
                    //+ "                                 </li>"
                    + "                             </ul>"
                    + "                         </div>"
                    + "                         <div class='panel-body'>"
                    + "                               <div id='" + idgrafica + "' style='height:450px;' > "
                    + "                                </div>"
                    + "                         </div>"
                    + "                       </div>"
                    + "                 </div>"


                var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "    title: { "
                    + "        text: '',"
                    + "        subtext: '' "
                    + "    },"
                    + "    tooltip: {"
                    + "        trigger: 'axis'"
                    + "    },"
                    + " legend: {"
                    + '  data: ' + series + ''
                    + " },"
                    + "    toolbox: {"
                    + "        show: true,"
                    + "        feature: {"
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                    + "            saveAsImage: { show: true, title: 'Descargar' }"
                    + "        } "
                    + "    },"
                    + "    calculable: true,"
                    + "    xAxis: ["
                    + "        {"
                    + " type: 'category', "
                    + "            boundaryGap: true, "
                    + '            data: ' + columnas + ''
                    + "        }"
                    + "    ],"
                    + "    yAxis: ["
                    + "        {"
                    + "            type: 'value',"
                    + "            axisLabel: {"
                    + "                formatter: '{value}'"
                    + "            }"
                    + "        }"
                    + "    ],"
                    + 'series: ' + valores + ''
                    + " });"
                    + "</script>"

                $('#Graficas').append(grafica);
                $('#scripts').append(script);
            }


            var tabla = '<div class="col-md-6">'
                + '       <div class="panel panel-default"> '
                + '                       <div class="panel-heading">'
                + '                           <div class="panel-title-box">'
                + '                               <h3>' + nombre + '</h3>'
                + '                           </div> '
                + '                           <ul class="panel-controls" style="margin-top: 2px;">'
                + '                                 <li><a href="#" onclick="AbrirGrafica(' + "'" + id + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                + '                           </ul>'
                + '                           <div class="btn-group pull-right">'
                + '                               <button class="btn btn-danger dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bars"></i> Exportar</button>'
                + '                               <ul class="dropdown-menu">'
                + ' <li><a href="#" onclick="$(' + "'#" + vartabla + "'" + ').tableExport({type:' + "'excel',escape:" + "'false'" + '});' + '"' + '><img src="./Content/Project/Imagenes/xls.png" width="24" /> XLS</a></li>'
                + '                            </ul>'
                + '                           </div> '
                + '                       </div> '
                + '                       <div class="panel-body padding-0"> '
                + '                           <div class="panel-body" style="height:auto;">'
                + '                               <table id="' + vartabla + '" class="table table-striped">'
                + '' + tabla
                + '                               </table>'
                + '                                  </div> '
                + '                       </div> '
                + '                   </div>'
                + '               </div>'

            $('#Tablas').append(tabla);

            num = num + 1;

        });


    }
    else if (data.Advertencia) {
        MensajeAdvertencia(data.Mensaje);
    }
    else {
        MensajeError(data.Mensaje);
    }
}

function AbrirGrafica(grafica) {

    $('#GraficaModal').empty();
    $('#scriptsmodal').empty();
    $('#TablaModal').empty();
    $('#LblRdoGraficaM').click();

    var comparagrafica = grafica;

    $('#ModalGrafica').modal('show');
    $('#GraficaModal').show();
    $('#TablaModal').hide();

    var Datos = $.grep(dsGraficas, function (obj) {
        var value = obj;


        if (value.id == comparagrafica) {

            var id = value.id;
            var nombre = value.Nombre;
            var tipo = value.Tipo;
            var series = value.Series;
            var columnas = value.LstColumnas;
            var valores = value.LstValores;
            var tabla = value.Tabla;
            var idgrafica = "grafica" + num.toString();
            var vargrafica = "vargrafica" + num.toString();
            var vartabla = "vartabla" + num.toString();

            $('#NombreGrafica').text(nombre);

            var tema = "temagraficas";

            if (nombre == "Urgentes/No urgentes") {
                var tema = "temagraficasurgentes"
            }




            if (tipo == "Pie") {

                var grafica = " <div   id='" + idgrafica + "' style='height:600px;' > "
                    + "                                </div>";

                var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "              tooltip: {"
                    + "                   trigger: 'item',"
                    + "                   formatter: '{a} <br/>{b} : {c} ({d}%)'"
                    + "               },"
                    + "              calculable: true,"
                    + "               legend: { "
                    + '                   x: "center",'
                    + "                   y: 'bottom',"
                    + '                   data:' + series + ''
                    + "               },"
                    + "               toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['funnel', 'pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                    + "               }, "
                    + "               series: [{ "
                    + "                   name: 'Ordenes',"
                    + "                   type: 'pie', "
                    + "                   radius: ['35%', '55%'],"
                    + "                   itemStyle: { "
                    + "                       normal: { "
                    + "                           label: { "
                    + "                               show: true "
                    + "                           },"
                    + "                           labelLine: {"
                    + "                               show: true "
                    + "                           }"
                    + "                       },"
                    + "                       emphasis: {"
                    + "                           label: {"
                    + "                               show: true,"
                    + "                               position: 'center',"
                    + "                               textStyle: {"
                    + "                                   fontSize: '14',"
                    + "                                   fontWeight: 'normal' "
                    + "                               } "
                    + "                           }"
                    + "                       }"
                    + "                   },"
                    + '                   data: ' + valores + ''
                    + "               }]"
                    + "           });"
                    + "</script>"

                $('#GraficaModal').append(grafica);
                $('#scriptsmodal').append(script);

            }
            else if (tipo == "bar") {



                var grafica = " <div  id='" + idgrafica + "' style='height:600px;' > "
                    + "  </div>";

                var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "title: {},"
                    + "tooltip: { trigger: 'axis'},"
                    + " legend: {"
                    + '  data: ' + series + ''
                    + " },"
                    + "  toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                    + "},"
                    + "calculable: false,"
                    + " xAxis: [{ "
                    + " type: 'category',"
                    + ' data:' + columnas + ''
                    + " }],"
                    + " yAxis: [{ "
                    + " type: 'value' "
                    + "}],"
                    + 'series: ' + valores + ''
                    + "});"
                    + "</script>"


                $('#GraficaModal').append(grafica);
                $('#scriptsmodal').append(script);

            }
            else if (tipo == "line") {

                var grafica = " <div  id='" + idgrafica + "' style='height:600px;' > "
                    + "  </div>";

                var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "    title: { "
                    + "        text: '',"
                    + "        subtext: '' "
                    + "    },"
                    + "    tooltip: {"
                    + "        trigger: 'axis'"
                    + "    },"
                    + "    legend: { "
                    + "        data: ['Meta', 'Promedio'] "
                    + "    },"
                    + "    toolbox: {"
                    + "        show: true,"
                    + "        feature: {"
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                    + "            saveAsImage: { show: true, title: 'Descargar' }"
                    + "        } "
                    + "    },"
                    + "    calculable: true,"
                    + "    xAxis: ["
                    + "        {"
                    + " type: 'category', "
                    + "            boundaryGap: true, "
                    + '            data: ' + columnas + ''
                    + "        }"
                    + "    ],"
                    + "    yAxis: ["
                    + "        {"
                    + "            type: 'value',"
                    + "            axisLabel: {"
                    + "                formatter: '{value}'"
                    + "            }"
                    + "        }"
                    + "    ],"
                    + 'series: ' + valores + ''
                    + " });"
                    + "</script>"

                $('#GraficaModal').append(grafica);
                $('#scriptsmodal').append(script);
            }


            var table = '<div class="btn-group pull-right">'
                + '                               <button class="btn btn-danger dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bars"></i> Exportar</button>'
                + '                               <ul class="dropdown-menu">'
                + ' <li><a href="#" onclick="$(' + "'#" + vartabla + "'" + ').tableExport({type:' + "'excel',escape:" + "'false'" + '});' + '"' + '><img src="./Content/Project/Imagenes/xls.png" width="24" /> XLS</a></li>'
                + '                            </ul>'
                + '                           </div> '
                + ' <div class="panel-body" style="height:600px;">'
                + '                               <table id="' + vartabla + '" class="table table-striped">'
                + '' + tabla
                + '                               </table>'
                + '                           </div> '

            $('#TablaModal').append(table);

            num = num + 1;


        }
    });





}
$('#RdoGraficaG').on('ifClicked', function (event) {
    $('#Tablas').hide();
    $('#Graficas').show();

});
$('#RdoTablaG').on('ifClicked', function (event) {
    $('#Tablas').show();
    $('#Graficas').hide();

});
$('#RdoGraficaM').on('ifClicked', function (event) {
    $('#TablaModal').hide();
    $('#GraficaModal').show();

});
$('#RdoTablaM').on('ifClicked', function (event) {
    $('#TablaModal').show();
    $('#GraficaModal').hide();

});

function MostrarGraficas() {
    $('#Tablas').hide();
    $('#Graficas').show();
}

function MostrarTablas() {
    $('#Tablas').show();
    $('#Graficas').hide();
}

function MostrarGraficasM() {
    $('#TablaModal').hide();
    $('#GraficaModal').show();
}

function MostrarTablasM() {
    $('#TablaModal').show();
    $('#GraficaModal').hide();
}
