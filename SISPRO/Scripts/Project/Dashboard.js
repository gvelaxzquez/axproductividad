var temagraficasRojo = {
    color: [
        '#0033cc', '#a43f3e'
    ],

    title: {
        itemGap: 8,
        textStyle: {
            fontWeight: 'normal',
            color: '#408829'
        }
    },

    dataRange: {
        color: ['#1f610a', '#97b58d']
    },

    toolbox: {
        color: ['#408829', '#408829', '#408829', '#408829']
    },

    tooltip: {
        backgroundColor: 'rgba(0,0,0,0.5)',
        axisPointer: {
            type: 'line',
            lineStyle: {
                color: '#408829',
                type: 'dashed'
            },
            crossStyle: {
                color: '#408829'
            },
            shadowStyle: {
                color: 'rgba(200,200,200,0.3)'
            }
        }
    },

    dataZoom: {
        dataBackgroundColor: '#eee',
        fillerColor: 'rgba(64,136,41,0.2)',
        handleColor: '#408829'
    },
    grid: {
        borderWidth: 0
    },

    categoryAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },

    valueAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitArea: {
            show: true,
            areaStyle: {
                color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },
    timeline: {
        lineStyle: {
            color: '#408829'
        },
        controlStyle: {
            normal: { color: '#408829' },
            emphasis: { color: '#408829' }
        }
    },

    k: {
        itemStyle: {
            normal: {
                color: '#68a54a',
                color0: '#a9cba2',
                lineStyle: {
                    width: 1,
                    color: '#408829',
                    color0: '#86b379'
                }
            }
        }
    },
    map: {
        itemStyle: {
            normal: {
                areaStyle: {
                    color: '#ddd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            },
            emphasis: {
                areaStyle: {
                    color: '#99d2dd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            }
        }
    },
    force: {
        itemStyle: {
            normal: {
                linkStyle: {
                    strokeColor: '#408829'
                }
            }
        }
    },
    chord: {
        padding: 4,
        itemStyle: {
            normal: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            },
            emphasis: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            }
        }
    },
    gauge: {
        startAngle: 225,
        endAngle: -45,
        axisLine: {
            show: true,
            lineStyle: {
                color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                width: 8
            }
        },
        axisTick: {
            splitNumber: 10,
            length: 12,
            lineStyle: {
                color: 'auto'
            }
        },
        axisLabel: {
            textStyle: {
                color: 'auto'
            }
        },
        splitLine: {
            length: 18,
            lineStyle: {
                color: 'auto'
            }
        },
        pointer: {
            length: '90%',
            color: 'auto'
        },
        title: {
            textStyle: {
                color: '#333'
            }
        },
        detail: {
            textStyle: {
                color: 'auto'
            }
        }
    },
    textStyle: {
        fontFamily: 'Arial, Verdana, sans-serif'
    }
};
var temagraficasVerde = {
    color: [
        '#0033cc', '#89ad4d'
    ],

    title: {
        itemGap: 8,
        textStyle: {
            fontWeight: 'normal',
            color: '#408829'
        }
    },

    dataRange: {
        color: ['#1f610a', '#97b58d']
    },

    toolbox: {
        color: ['#408829', '#408829', '#408829', '#408829']
    },

    tooltip: {
        backgroundColor: 'rgba(0,0,0,0.5)',
        axisPointer: {
            type: 'line',
            lineStyle: {
                color: '#408829',
                type: 'dashed'
            },
            crossStyle: {
                color: '#408829'
            },
            shadowStyle: {
                color: 'rgba(200,200,200,0.3)'
            }
        }
    },

    dataZoom: {
        dataBackgroundColor: '#eee',
        fillerColor: 'rgba(64,136,41,0.2)',
        handleColor: '#408829'
    },
    grid: {
        borderWidth: 0
    },

    categoryAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },

    valueAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitArea: {
            show: true,
            areaStyle: {
                color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },
    timeline: {
        lineStyle: {
            color: '#408829'
        },
        controlStyle: {
            normal: { color: '#408829' },
            emphasis: { color: '#408829' }
        }
    },

    k: {
        itemStyle: {
            normal: {
                color: '#68a54a',
                color0: '#a9cba2',
                lineStyle: {
                    width: 1,
                    color: '#408829',
                    color0: '#86b379'
                }
            }
        }
    },
    map: {
        itemStyle: {
            normal: {
                areaStyle: {
                    color: '#ddd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            },
            emphasis: {
                areaStyle: {
                    color: '#99d2dd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            }
        }
    },
    force: {
        itemStyle: {
            normal: {
                linkStyle: {
                    strokeColor: '#408829'
                }
            }
        }
    },
    chord: {
        padding: 4,
        itemStyle: {
            normal: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            },
            emphasis: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            }
        }
    },
    gauge: {
        startAngle: 225,
        endAngle: -45,
        axisLine: {
            show: true,
            lineStyle: {
                color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                width: 8
            }
        },
        axisTick: {
            splitNumber: 10,
            length: 12,
            lineStyle: {
                color: 'auto'
            }
        },
        axisLabel: {
            textStyle: {
                color: 'auto'
            }
        },
        splitLine: {
            length: 18,
            lineStyle: {
                color: 'auto'
            }
        },
        pointer: {
            length: '90%',
            color: 'auto'
        },
        title: {
            textStyle: {
                color: '#333'
            }
        },
        detail: {
            textStyle: {
                color: 'auto'
            }
        }
    },
    textStyle: {
        fontFamily: 'Arial, Verdana, sans-serif'
    }
};
var temagraficasAmarillo = {
    color: [
        '#0033cc', '#fe970a'
    ],

    title: {
        itemGap: 8,
        textStyle: {
            fontWeight: 'normal',
            color: '#408829'
        }
    },

    dataRange: {
        color: ['#1f610a', '#97b58d']
    },

    toolbox: {
        color: ['#408829', '#408829', '#408829', '#408829']
    },

    tooltip: {
        backgroundColor: 'rgba(0,0,0,0.5)',
        axisPointer: {
            type: 'line',
            lineStyle: {
                color: '#408829',
                type: 'dashed'
            },
            crossStyle: {
                color: '#408829'
            },
            shadowStyle: {
                color: 'rgba(200,200,200,0.3)'
            }
        }
    },

    dataZoom: {
        dataBackgroundColor: '#eee',
        fillerColor: 'rgba(64,136,41,0.2)',
        handleColor: '#408829'
    },
    grid: {
        borderWidth: 0
    },

    categoryAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },

    valueAxis: {
        axisLine: {
            lineStyle: {
                color: '#408829'
            }
        },
        splitArea: {
            show: true,
            areaStyle: {
                color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
            }
        },
        splitLine: {
            lineStyle: {
                color: ['#eee']
            }
        }
    },
    timeline: {
        lineStyle: {
            color: '#408829'
        },
        controlStyle: {
            normal: { color: '#408829' },
            emphasis: { color: '#408829' }
        }
    },

    k: {
        itemStyle: {
            normal: {
                color: '#68a54a',
                color0: '#a9cba2',
                lineStyle: {
                    width: 1,
                    color: '#408829',
                    color0: '#86b379'
                }
            }
        }
    },
    map: {
        itemStyle: {
            normal: {
                areaStyle: {
                    color: '#ddd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            },
            emphasis: {
                areaStyle: {
                    color: '#99d2dd'
                },
                label: {
                    textStyle: {
                        color: '#c12e34'
                    }
                }
            }
        }
    },
    force: {
        itemStyle: {
            normal: {
                linkStyle: {
                    strokeColor: '#408829'
                }
            }
        }
    },
    chord: {
        padding: 4,
        itemStyle: {
            normal: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            },
            emphasis: {
                lineStyle: {
                    width: 1,
                    color: 'rgba(128, 128, 128, 0.5)'
                },
                chordStyle: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(128, 128, 128, 0.5)'
                    }
                }
            }
        }
    },
    gauge: {
        startAngle: 225,
        endAngle: -45,
        axisLine: {
            show: true,
            lineStyle: {
                color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                width: 8
            }
        },
        axisTick: {
            splitNumber: 10,
            length: 12,
            lineStyle: {
                color: 'auto'
            }
        },
        axisLabel: {
            textStyle: {
                color: 'auto'
            }
        },
        splitLine: {
            length: 18,
            lineStyle: {
                color: 'auto'
            }
        },
        pointer: {
            length: '90%',
            color: 'auto'
        },
        title: {
            textStyle: {
                color: '#333'
            }
        },
        detail: {
            textStyle: {
                color: 'auto'
            }
        }
    },
    textStyle: {
        fontFamily: 'Arial, Verdana, sans-serif'
    }
};
var num = 1;
var dsGraficas = [];




$(document).ready(function () {
    CargaDashboard();


    setTimeout('document.location.reload()', 3000000);

});

function CargaDashboard() {
  var url = $('#urlCargaInicialDashboard').val();
    $.ajax({

        url: url,
        type: "POST",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        success: SuccessLlamadaGenerarDatosDashboardCarr1,
        error: function (xmlHttpRequest, textStatus, errorThrown) {

            MensajeError(data.Mensaje);
        }
    });
    return false;
}
function successCargaInicialGraficas(data) {
    if (data.Exito) {
       
        $('#SelGraficasG').empty();
        $('#SelGraficasG').append(data.LstGraficas);
        $('#SelGraficasG').selectpicker('refresh');

        $('#SelRecursosG').empty();
        $('#SelRecursosG').append(data.LstUsuarios);
        $('#SelRecursosG').selectpicker('refresh');
    }
    else if (data.Advertencia) {
        MensajeAdvertencia(data.Mensaje);
    }
    else {
        MensajeError(data.Mensaje);
    }
}


function SuccessLlamadaGenerarDatosDashboardCarr1(data) {
    if (data.Exito) {
     
        $('#Graficascarr1').empty();
        $('#scriptscarr1').empty();
         var dsIndicadores = jQuery.parseJSON(data.Indicadores);
         var dsIndicadoresA = jQuery.parseJSON(data.IndicadoresA);

             
             //MES ACTUAL
              if (dsIndicadores.Productividad < 90)
              {
                  $("#wprod").addClass("widget-danger");
                  $("#wprod").removeClass("widget-success");
                  $("#wprod").removeClass("widget-warning");

              }
              else if (dsIndicadores.Productividad >= 100) {
                  $("#wprod").removeClass("widget-danger");
                  $("#wprod").addClass("widget-success");
                  $("#wprod").removeClass("widget-warning");

              }
              else {

                  $("#wprod").removeClass("widget-danger");
                  $("#wprod").removeClass("widget-success");
                  $("#wprod").addClass("widget-warning");

              }


              if (dsIndicadores.IRetrabajo < 3) {
                  $("#wret").removeClass("widget-danger");
                  $("#wret").addClass("widget-success");
                  $("#wret").removeClass("widget-warning");

              }
              else if (dsIndicadores.IRetrabajo >= 15) {
                  $("#wret").addClass("widget-danger");
                  $("#wret").removeClass("widget-success");
                  $("#wret").removeClass("widget-warning");

              }
              else {

                  $("#wret").removeClass("widget-danger");
                  $("#wret").removeClass("widget-success");
                  $("#wret").addClass("widget-warning");

              }





                $('#LblProductividad').text(dsIndicadores.Productividad);
                $('#LblProductividadMens').text(dsIndicadores.ProductividadMes);
                $('#LblIRetrabajo').text(dsIndicadores.IRetrabajo);

                $('#LblObjetivo').text(dsIndicadores.Objetivo);
                $('#LblEsperadas').text(dsIndicadores.ObjetivoActual);
                $('#LblActual').text(dsIndicadores.HorasProductivas);

        //MES ANTERIOR
                if (dsIndicadoresA.Productividad < 90) {
                    $("#wprodA").addClass("widget-danger");
                    $("#wprodA").removeClass("widget-success");
                    $("#wprodA").removeClass("widget-warning");

                }
                else if (dsIndicadoresA.Productividad >= 100) {
                    $("#wprodA").removeClass("widget-danger");
                    $("#wprodA").addClass("widget-success");
                    $("#wprodA").removeClass("widget-warning");

                }
                else {

                    $("#wprodA").removeClass("widget-danger");
                    $("#wprodA").removeClass("widget-success");
                    $("#wprodA").addClass("widget-warning");

                }

                if (dsIndicadoresA.IRetrabajo < 3) {
                    $("#wretA").removeClass("widget-danger");
                    $("#wretA").addClass("widget-success");
                    $("#wretA").removeClass("widget-warning");

                }
                else if (dsIndicadoresA.IRetrabajo >= 15) {
                    $("#wretA").addClass("widget-danger");
                    $("#wretA").removeClass("widget-success");
                    $("#wretA").removeClass("widget-warning");

                }
                else {

                    $("#wretA").removeClass("widget-danger");
                    $("#wretA").removeClass("widget-success");
                    $("#wretA").addClass("widget-warning");

                }



                $('#LblProductividadA').text(dsIndicadoresA.Productividad);
                //$('#LblProductividadMens').text(dsIndicadores.ProductividadMes);
                $('#LblIRetrabajoA').text(dsIndicadoresA.IRetrabajo);
                $('#LblObjetivoA').text(dsIndicadoresA.Objetivo);
                $('#LblEsperadasA').text(dsIndicadoresA.ObjetivoActual);
                $('#LblActualA').text(dsIndicadoresA.HorasProductivas);

                  
              //Dias gugs
                 
                 $('#lblDiasSinBugs').text(dsIndicadores.DiasSinBugs);
                 $('#lblRecord').text(dsIndicadores.RecordBugs);





                var dsDatos = JSON.parse(data.LstGraficas);
                var dsDatosA = JSON.parse(data.LstGraficasA);
              


        var tema = "";

        if (dsIndicadores.Productividad < 90) {
            var tema = "temagraficasRojo";

        }
        else if (dsIndicadores.Productividad >= 100) {
            var tema = "temagraficasVerde";

        }
        else {

            var tema = "temagraficasAmarillo";

        }

         var temaA = "";

        if (dsIndicadoresA.Productividad < 90) {
            var temaA = "temagraficasRojo";

        }
        else if (dsIndicadoresA.Productividad >= 100) {
            var temaA = "temagraficasVerde";

        }
        else {

            var temaA = "temagraficasAmarillo";

        }




             $.each( dsDatos, function( key, value ) {
               
               dsGraficas.push(value);
               var id = value.id;
               var nombre = value.Nombre;
               var tipo = value.Tipo;
               var series = value.Series;
               var columnas = value.LstColumnas;
               var valores = value.LstValores;
               var tabla = value.Tabla;
               var idgrafica = "grafica" + num.toString();
               var vargrafica = "vargrafica" + num.toString();
               var vartabla = "vartabla" + num.toString();

             

               if (tipo == "Pie") {
                     var grafica = "<div class='col-md-5'>"
                   +"     <div class='panel panel-default'>" 
                   +"                           <div class='panel-heading'>"
                   +"                               <div class='panel-title-box'>"
                   +"                                  <h3>" + nombre + "</h3>" 
                   +"                              </div>" 
                   //+ "                               <ul class='panel-controls' style='margin-top: 2px;'>"
                   //+'                                 <li><a href="#" onclick="AbrirGrafica(' + "'"+ id  + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                   //+"                             </ul>" 
                   +"                         </div>" 
                   +"                         <div class='panel-body'>"
                   +"                               <div id='"+ idgrafica +"' style='height:350px;' > "
                   +"                                </div>" 
                   +"                         </div>" 
                   +"                       </div>" 
                   + "                 </div>"


                  var script = "<script>"
                  + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                  + "" + vargrafica + ".setOption({ "
                  + "              tooltip: {"
                  + "                   trigger: 'item',"
                  + "                   formatter: '{a} <br/>{b} : {c} ({d}%)'"
                  + "               },"
                  + "              calculable: true,"
                  + "               legend: { "
                  + '                   x: "center",'
                  + "                   y: 'bottom',"
                  + '                   data:' + series + ''
                  + "               },"
                  + "               toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['funnel', 'pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                  + "               }, "
                  + "               series: [{ "
                  + "                   name: 'Ordenes',"
                  + "                   type: 'pie', "
                  + "                   radius: ['35%', '55%'],"
                  + "                   itemStyle: { "
                  + "                       normal: { "
                  + "                           label: { "
                  + "                               show: true "
                  + "                           },"
                  + "                           labelLine: {"
                  + "                               show: true "
                  + "                           }"
                  + "                       },"
                  + "                       emphasis: {"
                  + "                           label: {"
                  + "                               show: true,"
                  + "                               position: 'center',"
                  + "                               textStyle: {"
                  + "                                   fontSize: '14',"
                  + "                                   fontWeight: 'normal' "
                  + "                               } "
                  + "                           }"
                  + "                       }"
                  + "                   },"
                  + '                   data: ' + valores + ''
                  + "               }]"
                  + "           });"
                  + "</script>"

                  $('#Graficascarr1').append(grafica);
                  $('#scriptscarr1').append(script);

                    }
               else if (tipo == "bar")
               {
                   var grafica = "<div class='col-md-12'>"
                   +"     <div class='panel panel-default'>" 
                   +"                           <div class='panel-heading'>"
                   +"                               <div class='panel-title-box'>"
                   +"                                  <h3>" + nombre + "</h3>" 
                   +"                              </div>" 
                   +"                               <ul class='panel-controls' style='margin-top: 2px;'>"
                   + '                                 <li><a href="#" onclick="AbrirGrafica(' + "'" + id + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                   +"                             </ul>" 
                   +"                         </div>" 
                   +"                         <div class='panel-body'>"
                   +"                               <div id='"+ idgrafica +"' style='height:450px;' > "
                   +"                                </div>" 
                   +"                         </div>" 
                   +"                       </div>" 
                   + "                 </div>"

                   var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "title: {},"
                    + "tooltip: { trigger: 'axis'},"
                    + " legend: {"
                    + '  data: ' + series + ''
                    + " },"
                    + "  toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                    + "},"
                    + "calculable: true,"
                    + " xAxis: [{ "
                    + " type: 'category',"
                    + ' data:' + columnas + ''
                    + " }],"
                    + " yAxis: [{ "
                    + " type: 'value' "
                    + "}],"
                    + 'series: ' + valores + ''
                    + "});"
                    + "</script>"


               

                   $('#Graficascarr1').append(grafica);
                   $('#scriptscarr1').append(script);

               }
               else if (tipo == "line") {

                   var grafica = "<div class='col-md-12'>"
            + "     <div class='panel panel-default'>"
            + "                           <div class='panel-heading'>"
            + "                               <div class='panel-title-box'>"
            + "                                  <h3>" + nombre + "</h3>"
            + "                              </div>"
            + "                               <ul class='panel-controls' style='margin-top: 2px;'>"
            + "                             </ul>"
            + "                         </div>"
            + "                         <div class='panel-body'>"
            + "                               <div id='" + idgrafica + "' style='height:450px;' > "
            + "                                </div>"
            + "                         </div>"
            + "                       </div>"
            + "                 </div>"


                   var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + tema + ");"
                   + "" + vargrafica + ".setOption({ "
                   + "    title: { "
                   + "        text: '',"
                   + "        subtext: '' "
                   + "    },"
                   + "    tooltip: {"
                   + "        trigger: 'axis'"
                   + "    },"
                   + " legend: {"
                   + '  data: ' + series + ''
                   + " },"
                   + "    toolbox: {"
                   + "        show: true,"
                   + "        feature: {"
                   + "            mark: { show: true },"
                  // + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                  // + "            saveAsImage: { show: true, title: 'Descargar' }"
                   + "        } "
                   + "    },"
                   + "    calculable: true,"
                   + "    xAxis: ["
                   + "        {"
                   + " type: 'category', "
                   + "            boundaryGap: true, "
                   + '            data: ' + columnas + ''
                   + "        }"
                   + "    ],"
                   + "    yAxis: ["
                   + "        {"
                   + "            type: 'value',"
                   + "            axisLabel: {"
                   + "                formatter: '{value}'"
                   + "            }"
                   + "        }"
                   + "    ],"
                   + 'series: ' + valores + ''
                   + " });"
                   + "</script>"

            

                   $('#Graficascarr1').append(grafica);
                   $('#scriptscarr1').append(script);
               }

                   num = num + 1;
               
             });


  

             $.each( dsDatosA, function( key, value ) {
               
               dsGraficas.push(value);
               var id = value.id;
               var nombre = value.Nombre;
               var tipo = value.Tipo;
               var series = value.Series;
               var columnas = value.LstColumnas;
               var valores = value.LstValores;
               var tabla = value.Tabla;
               var idgrafica = "grafica" + num.toString();
               var vargrafica = "vargrafica" + num.toString();
               var vartabla = "vartabla" + num.toString();

             

               if (tipo == "Pie") {
                     var grafica = "<div class='col-md-5'>"
                   +"     <div class='panel panel-default'>" 
                   +"                           <div class='panel-heading'>"
                   +"                               <div class='panel-title-box'>"
                   +"                                  <h3>" + nombre + "</h3>" 
                   +"                              </div>" 
                   //+ "                               <ul class='panel-controls' style='margin-top: 2px;'>"
                   //+'                                 <li><a href="#" onclick="AbrirGrafica(' + "'"+ id  + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                   //+"                             </ul>" 
                   +"                         </div>" 
                   +"                         <div class='panel-body'>"
                   +"                               <div id='"+ idgrafica +"' style='height:350px;' > "
                   +"                                </div>" 
                   +"                         </div>" 
                   +"                       </div>" 
                   + "                 </div>"


                  var script = "<script>"
                  + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + temaA + ");"
                  + "" + vargrafica + ".setOption({ "
                  + "              tooltip: {"
                  + "                   trigger: 'item',"
                  + "                   formatter: '{a} <br/>{b} : {c} ({d}%)'"
                  + "               },"
                  + "              calculable: true,"
                  + "               legend: { "
                  + '                   x: "center",'
                  + "                   y: 'bottom',"
                  + '                   data:' + series + ''
                  + "               },"
                  + "               toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['funnel', 'pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                  + "               }, "
                  + "               series: [{ "
                  + "                   name: 'Ordenes',"
                  + "                   type: 'pie', "
                  + "                   radius: ['35%', '55%'],"
                  + "                   itemStyle: { "
                  + "                       normal: { "
                  + "                           label: { "
                  + "                               show: true "
                  + "                           },"
                  + "                           labelLine: {"
                  + "                               show: true "
                  + "                           }"
                  + "                       },"
                  + "                       emphasis: {"
                  + "                           label: {"
                  + "                               show: true,"
                  + "                               position: 'center',"
                  + "                               textStyle: {"
                  + "                                   fontSize: '14',"
                  + "                                   fontWeight: 'normal' "
                  + "                               } "
                  + "                           }"
                  + "                       }"
                  + "                   },"
                  + '                   data: ' + valores + ''
                  + "               }]"
                  + "           });"
                  + "</script>"

                  $('#Graficascarr2').append(grafica);
                  $('#scriptscarr1').append(script);

                    }
               else if (tipo == "bar")
               {
                   var grafica = "<div class='col-md-12'>"
                   +"     <div class='panel panel-default'>" 
                   +"                           <div class='panel-heading'>"
                   +"                               <div class='panel-title-box'>"
                   +"                                  <h3>" + nombre + "</h3>" 
                   +"                              </div>" 
                   +"                               <ul class='panel-controls' style='margin-top: 2px;'>"
                   + '                                 <li><a href="#" onclick="AbrirGrafica(' + "'" + id + "'" + ')" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>'
                   +"                             </ul>" 
                   +"                         </div>" 
                   +"                         <div class='panel-body'>"
                   +"                               <div id='"+ idgrafica +"' style='height:450px;' > "
                   +"                                </div>" 
                   +"                         </div>" 
                   +"                       </div>" 
                   + "                 </div>"

                   var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + temaA + ");"
                    + "" + vargrafica + ".setOption({ "
                    + "title: {},"
                    + "tooltip: { trigger: 'axis'},"
                    + " legend: {"
                    + '  data: ' + series + ''
                    + " },"
                    + "  toolbox: {"
                    + "show: true,"
                    + " feature: { "
                    + "            mark: { show: true },"
                    + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                    + "    saveAsImage: {"
                    + "        show: true, "
                    + "        title: 'Descargar'"
                    + "    }"
                    + "}"
                    + "},"
                    + "calculable: true,"
                    + " xAxis: [{ "
                    + " type: 'category',"
                    + ' data:' + columnas + ''
                    + " }],"
                    + " yAxis: [{ "
                    + " type: 'value' "
                    + "}],"
                    + 'series: ' + valores + ''
                    + "});"
                    + "</script>"


               

                   $('#Graficascarr2').append(grafica);
                   $('#scriptscarr1').append(script);

               }
               else if (tipo == "line") {

                   var grafica = "<div class='col-md-12'>"
            + "     <div class='panel panel-default'>"
            + "                           <div class='panel-heading'>"
            + "                               <div class='panel-title-box'>"
            + "                                  <h3>" + nombre + "</h3>"
            + "                              </div>"
            + "                               <ul class='panel-controls' style='margin-top: 2px;'>"
            + "                             </ul>"
            + "                         </div>"
            + "                         <div class='panel-body'>"
            + "                               <div id='" + idgrafica + "' style='height:450px;' > "
            + "                                </div>"
            + "                         </div>"
            + "                       </div>"
            + "                 </div>"


                   var script = "<script>"
                    + " var " + vargrafica + " = echarts.init(document.getElementById('" + idgrafica + "')," + temaA + ");"
                   + "" + vargrafica + ".setOption({ "
                   + "    title: { "
                   + "        text: '',"
                   + "        subtext: '' "
                   + "    },"
                   + "    tooltip: {"
                   + "        trigger: 'axis'"
                   + "    },"
                   + " legend: {"
                   + '  data: ' + series + ''
                   + " },"
                   + "    toolbox: {"
                   + "        show: true,"
                   + "        feature: {"
                   + "            mark: { show: true },"
                  // + "            magicType: { show: true, type: ['line', 'bar','pie'] , title:''},"
                  // + "            saveAsImage: { show: true, title: 'Descargar' }"
                   + "        } "
                   + "    },"
                   + "    calculable: true,"
                   + "    xAxis: ["
                   + "        {"
                   + " type: 'category', "
                   + "            boundaryGap: true, "
                   + '            data: ' + columnas + ''
                   + "        }"
                   + "    ],"
                   + "    yAxis: ["
                   + "        {"
                   + "            type: 'value',"
                   + "            axisLabel: {"
                   + "                formatter: '{value}'"
                   + "            }"
                   + "        }"
                   + "    ],"
                   + 'series: ' + valores + ''
                   + " });"
                   + "</script>"

            

                   $('#Graficascarr2').append(grafica);
                   $('#scriptscarr1').append(script);
               }

                   num = num + 1;
               
             });

        $("#ItemMesAnterior").removeClass('active');

         
    }
    else if (data.Advertencia) {
        MensajeAdvertencia(data.Mensaje);
    }
    else {
        MensajeError(data.Mensaje);
    }
}



//function animateContent(direction) {
//    var animationOffset = $('.container').height() - $('.content').height();
//    if (direction == 'up') {
//        animationOffset = 0;
//    }

//    console.log("animationOffset:" + animationOffset);
//    $('.content').animate({ "marginTop": (animationOffset) + "px" }, 5000);
//}

//function up() {
//    animateContent("up")
//}
//function down() {
//    animateContent("down")
//}

//function start() {
//    setTimeout(function () {
//        down();
//    }, 2000);
//    setTimeout(function () {
//        up();
//    }, 2000);
//    setTimeout(function () {
//        console.log("wait...");
//    }, 5000);
//}


//var div = $('#divprincipal');
//setInterval(function () {
//    var pos = div.scrollTop();
//    div.scrollTop(pos + 2);
//}, 200)

//$(document).ready(function() {
//    $('#divprincipal').animate({
//        scrollTop: $('#divprincipal').get(0).scrollHeight
//    }, 100);
//});


//setInterval(function(){

//    //time to scroll to bottom
//    $("html, body").animate({ scrollTop: $(document).height() }, 1000);

//    //scroll to top
//    setTimeout(function() {
//       $('html, body').animate({scrollTop:0}, 8000);
//    },2000);//call every 2000 miliseconds

//},2000)

//$("html, body").animate({ scrollTop: $(document).height() }, 4000);
//setTimeout(function () {
//    $('html, body').animate({ scrollTop: 0 }, 4000);
//}, 4000);
//setInterval(function () {
//    // 4000 - it will take 4 secound in total from the top of the page to the bottom
//    $("html, body").animate({ scrollTop: $(document).height() }, 4000);
//    setTimeout(function () {
//        $('html, body').animate({ scrollTop: 0 }, 4000);
//    }, 4000);

//}, 8000);